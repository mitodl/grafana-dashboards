apiVersion: grizzly.grafana.com/v1alpha1
kind: Dashboard
metadata:
    folder: 9lJtCes7z
    name: gH4SDGQ7z
spec:
    annotations:
        list:
            - builtIn: 1
              datasource: -- Grafana --
              enable: true
              hide: true
              iconColor: rgba(0, 211, 255, 1)
              name: Annotations & Alerts
              target:
                limit: 100
                matchAny: false
                tags: []
                type: dashboard
              type: dashboard
    editable: true
    fiscalYearStartMonth: 0
    graphTooltip: 0
    iteration: 1.65039252832e+12
    links: []
    liveNow: false
    panels:
        - datasource:
            type: prometheus
            uid: ${datasource}
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings:
                    - options:
                        "1":
                            index: 0
                            text: SEALED
                        "2":
                            index: 1
                            text: UNSEALED
                      type: value
                thresholds:
                    mode: absolute
                    steps:
                        - color: red
                          value: null
                        - color: red
                          value: 1
                        - color: green
                          value: 2
            overrides: []
          gridPos:
            h: 7
            w: 4
            x: 0
            "y": 0
          id: 2
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: auto
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            textMode: auto
          pluginVersion: 8.4.6
          targets:
            - datasource:
                type: prometheus
                uid: ${datasource}
              exemplar: true
              expr: (1 + vault_core_unsealed{})
              format: time_series
              instant: false
              interval: ""
              legendFormat: ""
              refId: A
          title: Seal Status
          type: stat
        - datasource:
            type: prometheus
            uid: ${datasource}
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                custom:
                    align: auto
                    displayMode: auto
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
            overrides: []
          gridPos:
            h: 18
            w: 6
            x: 4
            "y": 0
          id: 4
          options:
            footer:
                fields: ""
                reducer:
                    - sum
                show: false
            showHeader: true
          pluginVersion: 8.4.6
          targets:
            - datasource:
                type: prometheus
                uid: ${datasource}
              exemplar: false
              expr: avg without(instance, host, environment, service, application, org_unit) (vault_secret_kv_count)
              format: table
              instant: true
              interval: ""
              legendFormat: '{{ mount_point }}'
              refId: A
          title: Secrets
          transformations:
            - id: seriesToColumns
              options:
                byField: mount_point
            - id: organize
              options:
                excludeByName:
                    Time: true
                    cluster: true
                    job: true
                    mount_point: false
                    namespace: true
                indexByName: {}
                renameByName: {}
          type: table
        - datasource:
            type: prometheus
            uid: ${datasource}
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                unit: s
            overrides: []
          gridPos:
            h: 11
            w: 4
            x: 0
            "y": 7
          id: 6
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: horizontal
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            textMode: auto
          pluginVersion: 8.4.6
          targets:
            - datasource:
                type: prometheus
                uid: ${datasource}
              exemplar: true
              expr: host_uptime{application="vault"}
              interval: ""
              legendFormat: '{{ host }}'
              refId: A
          title: Host Uptime
          type: stat
    schemaVersion: 35
    style: dark
    tags:
        - managed
        - vault
        - performance
    templating:
        list:
            - current:
                selected: false
                text: grafanacloud-mitolci-prom
                value: grafanacloud-mitolci-prom
              hide: 2
              includeAll: false
              multi: false
              name: datasource
              options: []
              query: prometheus
              queryValue: ""
              refresh: 1
              regex: grafanacloud-mitol.*
              skipUrlSync: false
              type: datasource
    time:
        from: now-2d
        to: now
    timepicker: {}
    timezone: ""
    title: Vault
    uid: gH4SDGQ7z
    weekStart: ""
